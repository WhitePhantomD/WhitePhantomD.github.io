import{f as X,b as p,d as Y,c as y,s as f}from"../chunks/D9uXLZzc.js";import{a4 as S,a5 as $,a6 as tt,a7 as r,a8 as i,a9 as at,aa as u,ab as et,ac as P,d as m,ad as h,Q as A}from"../chunks/BjJl-aab.js";import{i as B}from"../chunks/CVsZMa6J.js";import{s as rt,a as it}from"../chunks/Bg3MPwDR.js";import{c as lt}from"../chunks/B_40f77_.js";import{i as I}from"../chunks/BKj6tK3B.js";import{b as ot}from"../chunks/DE094i6U.js";async function st({url:d,fetch:a}){const s=d.searchParams.get("key");if(!s)return{};const o=sessionStorage.getItem(s);if(!o)return{};try{const v=JSON.parse(o);sessionStorage.removeItem(s);const w=await nt(a,v.lat,v.lon);return{detailData:v,detailWeather:w}}catch(v){console.error("Error parsing stored data",v)}}async function nt(d,a,s){try{let o=await d(`https://api.open-meteo.com/v1/forecast?latitude=${a}&longitude=${s}&current_weather=true`);if(!o.ok)throw new Error("Weather fetch failed");return o=await o.json(),o}catch(o){return{error:o.message}}}const Ct=Object.freeze(Object.defineProperty({__proto__:null,load:st},Symbol.toStringTag,{value:"Module"}));var dt=X('<svg width="800px" height="800px" viewBox="-4 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>location</title><desc>Created with Sketch Beta.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketchtype="MSPage"><g id="Icon-Set" sketchtype="MSLayerGroup" transform="translate(-104.000000, -411.000000)" fill="#FFFFFF"><path d="M116,426 C114.343,426 113,424.657 113,423 C113,421.343 114.343,420 116,420 C117.657,420 119,421.343 119,423 C119,424.657 117.657,426 116,426 L116,426 Z M116,418 C113.239,418 111,420.238 111,423 C111,425.762 113.239,428 116,428 C118.761,428 121,425.762 121,423 C121,420.238 118.761,418 116,418 L116,418 Z M116,440 C114.337,440.009 106,427.181 106,423 C106,417.478 110.477,413 116,413 C121.523,413 126,417.478 126,423 C126,427.125 117.637,440.009 116,440 L116,440 Z M116,411 C109.373,411 104,416.373 104,423 C104,428.018 114.005,443.011 116,443 C117.964,443.011 128,427.95 128,423 C128,416.373 122.627,411 116,411 L116,411 Z" id="location" sketchtype="MSShapeGroup"></path></g></g></svg>');function ct(d,a){var s=dt();S(()=>rt(s,0,lt(a.myClass))),p(d,s)}var vt=(d,a,s,o)=>{m(a)?s():o()},ut=(d,a)=>{window.open(`https://www.google.com/maps/search/?api=1&query=${a.data.detailData.lat},${a.data.detailData.lon}`,"_blank")},mt=y('<div class="flex items-center justify-between"><h1 class="text-4xl font-bold"> </h1> <button aria-label="Bookmark location" class="rounded-full p-2 transition-colors hover:bg-gray-700"><img alt="Bookmark" class="h-8 w-8"/></button></div> <p class="text-lg text-gray-300"> </p> <div class="flex items-center justify-between border-t border-gray-700 pt-4"><div class="flex items-start text-5xl font-extrabold"> <span class="mt-1 text-3xl font-medium">°C</span></div> <div class="text-right text-lg"><p> </p> <p class="text-gray-400"> </p></div></div> <div class="flex justify-end border-t border-gray-700 pt-4"><button aria-label="Open location in Google Maps" class="flex items-center space-x-2 text-blue-400 transition-colors hover:text-blue-300"><!> <span>Open in Google Maps</span></button></div>',1),ft=y('<div class="text-center text-xl text-red-400"><p>Error fetching weather data:</p> <p> </p></div>'),gt=y('<div class="text-center text-xl text-gray-400"><p>No location data available.</p> <p>Please ensure you navigate from a valid location selection.</p></div>'),_t=y('<div class="min-h-screen w-full bg-gradient-to-b from-gray-900 to-blue-800 p-6 text-white"><div class="mx-auto max-w-md space-y-6 rounded-lg bg-gray-800 bg-opacity-70 p-6 shadow-xl"><!></div></div>');function Dt(d,a){$(a,!0);let s=h(()=>{var t,e;return((e=(t=a.data)==null?void 0:t.detailData)==null?void 0:e.display_place)||"N/A"}),o=h(()=>{var t,e;return((e=(t=a.data)==null?void 0:t.detailData)==null?void 0:e.display_address)||"N/A"}),v=h(()=>{var t,e,l;return(l=(e=(t=a.data)==null?void 0:t.detailWeather)==null?void 0:e.current_weather)==null?void 0:l.temperature}),w=h(()=>{var t,e,l;return(l=(e=(t=a.data)==null?void 0:t.detailWeather)==null?void 0:e.current_weather)==null?void 0:l.windspeed}),E=h(()=>{var t,e,l;return(l=(e=(t=a.data)==null?void 0:t.detailWeather)==null?void 0:e.current_weather)==null?void 0:l.winddirection}),x=et(!1);function G(t){return t===0?"Clear sky":t>0&&t<4?"Partly cloudy":t>=45&&t<=48?"Foggy":t>=51&&t<=67?"Rainy":t>=71&&t<=75?"Snowy":t>=95&&t<=99?"Thunderstorm":"N/A"}const W={locationName:null,subLocationName:null,latitude:null,longitude:null,loading:!0};function T(){let t={...W,locationName:a.data.detailData.display_place,subLocationName:a.data.detailData.display_address,latitude:a.data.detailData.lat,longitude:a.data.detailData.lon};I.add(t),A(x,!0)}function Z(){let t={...W,locationName:a.data.detailData.display_place,subLocationName:a.data.detailData.display_address,latitude:a.data.detailData.lat,longitude:a.data.detailData.lon};I.remove(t),A(x,!1)}var k=_t(),M=r(k),R=r(M);{var q=t=>{var e=mt(),l=at(e),g=r(l),c=r(g,!0);i(g);var n=u(g,2);n.__click=[vt,x,Z,T];var b=r(n);i(n),i(l);var _=u(l,2),J=r(_,!0);i(_);var C=u(_,2),D=r(C),Q=r(D,!0);P(),i(D);var F=u(D,2),L=r(F),U=r(L,!0);i(L);var O=u(L,2),H=r(O);i(O),i(F),i(C);var j=u(C,2),N=r(j);N.__click=[ut,a];var K=r(N);ct(K,{myClass:"h-6 w-6"}),P(2),i(N),i(j),S(V=>{f(c,m(s)),it(b,"src",`${ot??""}/images/${m(x)?"pin_fill":"pin"}.svg`),f(J,m(o)),f(Q,m(v)),f(U,V),f(H,`Wind: ${m(w)??""} km/h, ${m(E)??""}°`)},[()=>G(a.data.detailWeather.current_weather.weathercode)]),p(t,e)},z=(t,e)=>{{var l=c=>{var n=ft(),b=u(r(n),2),_=r(b,!0);i(b),i(n),S(()=>f(_,a.data.detailWeather.error)),p(c,n)},g=c=>{var n=gt();p(c,n)};B(t,c=>{var n;(n=a.data.detailWeather)!=null&&n.error?c(l):c(g,!1)},e)}};B(R,t=>{a.data.detailData&&a.data.detailWeather?t(q):t(z,!1)})}i(M),i(k),p(d,k),tt()}Y(["click"]);export{Dt as component,Ct as universal};
