import{b,a as w,f as C}from"../chunks/ZCPXJNnU.js";import{$ as _,a0 as y,a1 as s,a2 as k,a3 as m,a4 as u,d as g,a5 as h}from"../chunks/cpraTQAE.js";import{d as x,s as f}from"../chunks/D7e-j1mN.js";import{c as S}from"../chunks/B_40f77_.js";import{s as D}from"../chunks/BguNlFe-.js";import{i as L}from"../chunks/Bgo-GJmP.js";async function M({url:o,fetch:t}){const a=o.searchParams.get("key");if(!a)return{};const e=sessionStorage.getItem(a);if(!e)return{};try{const r=JSON.parse(e);sessionStorage.removeItem(a);const i=await N(t,r.lat,r.lon);return{detailData:r,detailWeather:i}}catch(r){console.error("Error parsing stored data",r)}}async function N(o,t,a){try{let e=await o(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${a}&current_weather=true`);if(!e.ok)throw new Error("Weather fetch failed");return e=await e.json(),e}catch(e){return{error:e.message}}}const T=Object.freeze(Object.defineProperty({__proto__:null,load:M},Symbol.toStringTag,{value:"Module"}));var O=b('<svg width="800px" height="800px" viewBox="-4 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>location</title><desc>Created with Sketch Beta.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketchtype="MSPage"><g id="Icon-Set" sketchtype="MSLayerGroup" transform="translate(-104.000000, -411.000000)" fill="#FFFFFF"><path d="M116,426 C114.343,426 113,424.657 113,423 C113,421.343 114.343,420 116,420 C117.657,420 119,421.343 119,423 C119,424.657 117.657,426 116,426 L116,426 Z M116,418 C113.239,418 111,420.238 111,423 C111,425.762 113.239,428 116,428 C118.761,428 121,425.762 121,423 C121,420.238 118.761,418 116,418 L116,418 Z M116,440 C114.337,440.009 106,427.181 106,423 C106,417.478 110.477,413 116,413 C121.523,413 126,417.478 126,423 C126,427.125 117.637,440.009 116,440 L116,440 Z M116,411 C109.373,411 104,416.373 104,423 C104,428.018 114.005,443.011 116,443 C117.964,443.011 128,427.95 128,423 C128,416.373 122.627,411 116,411 L116,411 Z" id="location" sketchtype="MSShapeGroup"></path></g></g></svg>');function F(o,t){var a=O();_(()=>D(a,0,S(t.myClass))),w(o,a)}function W(o,t,a){let e={...t,locationName:a.data.detailData.display_place,subLocationName:a.data.detailData.display_address+" - "+a.data.detailData.address.country_code.toUpperCase(),latitude:a.data.detailData.lat,longitude:a.data.detailData.lon};L.add(e)}var I=(o,t)=>{window.open(`https://www.google.com/maps?q=${t.data.detailData.lat},${t.data.detailData.lon}`,"_blank")},P=C('<div class="min-h-screen w-full bg-gradient-to-b from-gray-900 to-blue-700 text-white"><h1>Detail</h1> <button aria-label="Open location in Google Maps"><!></button> <br/> <br/> <br/> <br/> <button>Add Location</button></div>');function B(o,t){y(t,!0);let a=h(()=>{var n;return(n=t.data)!=null&&n.detailData?JSON.stringify(t.data.detailData):""}),e=h(()=>{var n;return(n=t.data)!=null&&n.detailWeather?JSON.stringify(t.data.detailWeather):""});const r={locationName:null,subLocationName:null,latitude:null,longitude:null,loading:!0};var i=P(),l=s(m(i),2);l.__click=[I,t];var v=m(l);F(v,{myClass:"max-h-10 max-w-10"}),u(l);var d=s(l,5),c=s(d,4),p=s(c);p.__click=[W,r,t],u(i),_(()=>{f(d,` LocationData: ${g(a)??""} `),f(c,` WeatherData: ${g(e)??""} `)}),w(o,i),k()}x(["click"]);export{B as component,T as universal};
